{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport simpleLightbox from 'simplelightbox';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst octagonIconUrl = new URL('./img/octagon.svg', import.meta.url).href;\nconst closeIconUrl = new URL('./img/x.svg', import.meta.url).href;\n\nconst searchParamsObject = {\n  key: '41460845-2ab95350f4581127087fd5faf',\n  q: '',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n};\n\nconst formEl = document.querySelector('.search-form');\nconst buttonEl = document.querySelector('.search-btn');\nconst loadingTextEl = document.querySelector('.loading-message');\nconst galleryEl = document.querySelector('.gallery');\n\nconst searchInput = formEl.elements.search;\n\nloadingTextEl.style.display = 'none';\n\nlet gallery = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionSelector: 'img',\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n});\n\nformEl.addEventListener('submit', event => {\n  event.preventDefault();\n\n  let searchKey = searchInput.value.trim();\n  if (!searchKey) {\n    createMessage('Search must be filled!');\n    return;\n  }\n  searchInput.value = '';\n\n  fetchImages(searchKey)\n    .then(images => renderImages(images))\n    .catch(error => {\n      console.log(error);\n    })\n    .finally(() => {\n      loadingTextEl.style.display = 'none';\n      buttonEl.disabled = false;\n    });\n});\n\nfunction fetchImages(searchText) {\n  loadingTextEl.style.display = 'block';\n  buttonEl.disabled = true;\n\n  searchParamsObject.q = searchText;\n  const searchParams = new URLSearchParams(searchParamsObject);\n\n  return fetch(`https://pixabay.com/api/?${searchParams.toString()}`)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    })\n    .catch(error => createMessage(error));\n}\n\nfunction renderImages(images) {\n  if (images.hits.length === 0) {\n    createMessage(\n      'Sorry, there are no images matching your search query. Please try again!'\n    );\n    return;\n  }\n\n  galleryEl.innerHTML = '';\n  const galleryHTML = images.hits.reduce((acc, imageEl) => {\n    return (acc += `\n        <a class=\"gallery-link\" href=\"${imageEl.largeImageURL}\">\n          <img\n              class=\"gallery-image\"\n              src=\"${imageEl.webformatURL}\"\n              alt=\"${imageEl.tags}\"\n          />\n          <ul>\n            <li>\n                <span>Likes</span>\n                <span>${imageEl.likes}</span>\n            </li>\n            <li>\n                <span>Views</span>\n                <span>${imageEl.views}</span>\n            </li>\n            <li>\n                <span>Comments</span>\n                <span>${imageEl.comments}</span>\n            </li>\n            <li>\n                <span>Downloads</span>\n                <span>${imageEl.downloads}</span>\n            </li>\n          </ul>  \n          </a>`);\n  }, '');\n\n  galleryEl.insertAdjacentHTML('beforeend', galleryHTML);\n  gallery.refresh();\n}\n\nfunction createMessage(textMessage) {\n  iziToast.show({\n    // title: 'Error',\n    titleColor: '#FFF',\n    titleSize: '16px',\n    message: textMessage,\n    messageColor: '#FFF',\n    messageSize: '16px',\n    maxWidth: '462px',\n    position: 'topRight',\n    backgroundColor: '#EF4040',\n    iconUrl: octagonIconUrl,\n    progressBarColor: '#FFBEBE',\n    timeout: 500000,\n    targetFirst: false,\n    close: false,\n    buttons: [\n      [\n        `<button type=\"button\" id=\"izi-close-button\">\n                 <img src=\"${closeIconUrl}\" alt=\"\" width=\"16px\" height=\"16px\" />\n              </button>`,\n        function (instance, toast) {\n          instance.hide({}, toast, 'buttonName');\n        },\n      ],\n    ],\n  });\n\n  // div самого вікна\n  let messageElement = document.querySelector('.iziToast.fadeInUp');\n  messageElement.style.paddingTop = '20px';\n  messageElement.style.paddingBottom = '20px';\n\n  // текст помилки\n  messageElement = document.querySelector(\n    '.iziToast>.iziToast-body .iziToast-texts'\n  );\n  messageElement.style.maxWidth = '322px';\n}\n"],"names":["octagonIconUrl","closeIconUrl","searchParamsObject","formEl","buttonEl","loadingTextEl","galleryEl","searchInput","gallery","SimpleLightbox","event","searchKey","createMessage","fetchImages","images","renderImages","error","searchText","searchParams","response","galleryHTML","acc","imageEl","textMessage","iziToast","instance","toast","messageElement"],"mappings":"6vBAOA,MAAMA,EAAiB,IAA6C,IAAA,6CAAA,KAAA,QAAA,EAAC,KAC/DC,EAAe,IAAuC,IAAA,uCAAA,KAAA,QAAA,EAAC,KAEvDC,EAAqB,CACzB,IAAK,qCACL,EAAG,GACH,WAAY,QACZ,YAAa,aACb,WAAY,EACd,EAEMC,EAAS,SAAS,cAAc,cAAc,EAC9CC,EAAW,SAAS,cAAc,aAAa,EAC/CC,EAAgB,SAAS,cAAc,kBAAkB,EACzDC,EAAY,SAAS,cAAc,UAAU,EAE7CC,EAAcJ,EAAO,SAAS,OAEpCE,EAAc,MAAM,QAAU,OAE9B,IAAIG,EAAU,IAAIC,EAAe,aAAc,CAC7C,SAAU,GACV,gBAAiB,MACjB,YAAa,OACb,aAAc,MACd,gBAAiB,QACnB,CAAC,EAEDN,EAAO,iBAAiB,SAAUO,GAAS,CACzCA,EAAM,eAAc,EAEpB,IAAIC,EAAYJ,EAAY,MAAM,KAAI,EACtC,GAAI,CAACI,EAAW,CACdC,EAAc,wBAAwB,EACtC,MACD,CACDL,EAAY,MAAQ,GAEpBM,EAAYF,CAAS,EAClB,KAAKG,GAAUC,EAAaD,CAAM,CAAC,EACnC,MAAME,GAAS,CACd,QAAQ,IAAIA,CAAK,CACvB,CAAK,EACA,QAAQ,IAAM,CACbX,EAAc,MAAM,QAAU,OAC9BD,EAAS,SAAW,EAC1B,CAAK,CACL,CAAC,EAED,SAASS,EAAYI,EAAY,CAC/BZ,EAAc,MAAM,QAAU,QAC9BD,EAAS,SAAW,GAEpBF,EAAmB,EAAIe,EACvB,MAAMC,EAAe,IAAI,gBAAgBhB,CAAkB,EAE3D,OAAO,MAAM,4BAA4BgB,EAAa,SAAQ,GAAI,EAC/D,KAAKC,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACtB,CAAK,EACA,MAAMH,GAASJ,EAAcI,CAAK,CAAC,CACxC,CAEA,SAASD,EAAaD,EAAQ,CAC5B,GAAIA,EAAO,KAAK,SAAW,EAAG,CAC5BF,EACE,0EACN,EACI,MACD,CAEDN,EAAU,UAAY,GACtB,MAAMc,EAAcN,EAAO,KAAK,OAAO,CAACO,EAAKC,IACnCD,GAAO;AAAA,wCACqBC,EAAQ;AAAA;AAAA;AAAA,qBAG3BA,EAAQ;AAAA,qBACRA,EAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,wBAKLA,EAAQ;AAAA;AAAA;AAAA;AAAA,wBAIRA,EAAQ;AAAA;AAAA;AAAA;AAAA,wBAIRA,EAAQ;AAAA;AAAA;AAAA;AAAA,wBAIRA,EAAQ;AAAA;AAAA;AAAA,gBAI3B,EAAE,EAELhB,EAAU,mBAAmB,YAAac,CAAW,EACrDZ,EAAQ,QAAO,CACjB,CAEA,SAASI,EAAcW,EAAa,CAClCC,EAAS,KAAK,CAEZ,WAAY,OACZ,UAAW,OACX,QAASD,EACT,aAAc,OACd,YAAa,OACb,SAAU,QACV,SAAU,WACV,gBAAiB,UACjB,QAASvB,EACT,iBAAkB,UAClB,QAAS,IACT,YAAa,GACb,MAAO,GACP,QAAS,CACP,CACE;AAAA,6BACqBC;AAAA,yBAErB,SAAUwB,EAAUC,EAAO,CACzBD,EAAS,KAAK,CAAA,EAAIC,EAAO,YAAY,CACtC,CACF,CACF,CACL,CAAG,EAGD,IAAIC,EAAiB,SAAS,cAAc,oBAAoB,EAChEA,EAAe,MAAM,WAAa,OAClCA,EAAe,MAAM,cAAgB,OAGrCA,EAAiB,SAAS,cACxB,0CACJ,EACEA,EAAe,MAAM,SAAW,OAClC"}